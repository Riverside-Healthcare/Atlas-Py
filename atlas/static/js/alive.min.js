!function(){"use strict";!function(){window.ajaxOn=!0;var e,t,s=new Date,a=function a(e){var t={},n=navigator,i=window,o=document,r=i.location;return t.language=n.language,t.userAgent=n.userAgent,t.host=r.host,t.hostname=r.hostname,t.href=r.href,t.protocol=r.protocol,t.search=r.search,t.pathname=r.pathname,t.screenHeight=o.documentElement.clientHeight,t.screenWidth=o.documentElement.clientWidth,t.origin=i.origin,t.referrer=o.referrer,t.loadTime=e||i.performance.timing.domContentLoadedEventEnd-i.performance.timing.navigationStart,t.zoom=i.devicePixelRatio,t.sessionId=u(),t.pageId=f(),t.pageTime=Date.now()-s.getTime(),t},u=function u(e){return"clear"===e?(sessionStorage.removeItem("_sid"),!1):("reset"!==e&&"undefined"!=typeof sessionStorage._sid||(sessionStorage._sid=btoa((new Date).toString()),f("reset"),s=new Date),sessionStorage._sid)},f=function f(e){return"reset"!==e&&"undefined"!=typeof sessionStorage._pid||(s=new Date,sessionStorage._pid=btoa((new Date).toString())),sessionStorage._pid},i=function i(e,t){var n;"newpage"===t&&(f("reset"),window.ajaxOn=!0),!0===window.ajaxOn&&(navigator.sendBeacon?navigator.sendBeacon("/analytics/log",JSON.stringify(a(e))):((n=new XMLHttpRequest).open("post","/analytics/log",!0),n.setRequestHeader("Content-Type","text/plain;charset=UTF-8`"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("X-CSRFToken",csrftoken),n.send(JSON.stringify(a(e))))),l()},n=function n(){e=window.setTimeout(r,12e4),u()},o=function o(){debounce((window.clearTimeout(e),n(),void(window.ajaxOn=!0)),500)},r=function r(){window.ajaxOn=!1,u("clear"),sessionStorage.clear()},h=function h(){document.addEventListener("mousemove",o,!1),document.addEventListener("mousedown",o,!1),document.addEventListener("keypress",o,!1),document.addEventListener("touchmove",o,!1),document.addEventListener("scroll",o,{passive:!0},!1),n()},c=function c(){t=window.setTimeout(i,3e4)},l=function l(){window.clearTimeout(t),c()};"complete"===document.readyState&&(h(),i(0,"newpage")),window.addEventListener("load",function(){h(),i(0,"newpage")},!1),document.addEventListener("analytics-post",function(e){"undefined"!=typeof e.detail&&i(e.detail.value,e.detail.type)})}()}();var module=function(){"use strict";function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function t(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e["default"]:e}var n,i,I,o={};function s(e){if(!e)return s.__;Array.prototype.reduce||(Array.prototype.reduce=function(e,t){for(var n=t,i=0;i<this.length;i++)n=e(n,this[i],i,this);return n});var r="";return("."+e).split(".").reduce(function(e,t,n,i){r?r+="."+t:r=t;var o=e["__"+r];return o===undefined&&(s.Logger.prototype=e,o=new s.Logger(r),e["__"+r]=o),o},s.__)}return n=o,I=e&&e.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),function(a){function t(e,t,n){t[e]!==undefined&&(null!==t[e]?n[e]=t[e]:delete n[e])}function u(e){if(null==a.enabled||a.enabled){try{if(e.userAgentRegex&&!new RegExp(e.userAgentRegex).test(navigator.userAgent))return}catch(t){}try{if(e.ipRegex&&a.clientIP&&!new RegExp(e.ipRegex).test(a.clientIP))return}catch(t){}return 1}}function f(e,t){try{if(e.disallow&&new RegExp(e.disallow).test(t))return}catch(n){}return 1}function h(e){return"function"==typeof e?e instanceof RegExp?e.toString():e():e}a.requestId="",a.entryId=0,a._createXMLHttpRequest=function(){return new XMLHttpRequest},a._getTime=function(){return(new Date).getTime()},a._console=console,a._appenderNames=[];var i=function(e,t,n){this.msg=e,this.meta=t,this.finalString=n};function c(e){var t,n=h(e);switch(T(n)){case"string":return new i(n,null,n);case"number":case"boolean":return t=n.toString(),new i(t,null,t);case"undefined":return new i("undefined",null,"undefined");case"object":return n instanceof RegExp||n instanceof String||n instanceof Number||n instanceof Boolean?(t=n.toString(),new i(t,null,t)):(t="function"==typeof a.serialize?a.serialize.call(this,n):JSON.stringify(n),new i("",n,t));default:return new i("unknown",null,"unknown")}}function e(){return 1e3}function n(){return 2e3}function o(){return 3e3}function r(){return 4e3}function s(){return 5e3}function l(){return 6e3}a.setOptions=function(e){return t("enabled",e,this),t("maxMessages",e,this),t("defaultAjaxUrl",e,this),t("clientIP",e,this),t("requestId",e,this),t("defaultBeforeSend",e,this),t("serialize",e,this),this},a.getAllLevel=function(){return-2147483648},a.getTraceLevel=e,a.getDebugLevel=n,a.getInfoLevel=o,a.getWarnLevel=r,a.getErrorLevel=s,a.getFatalLevel=l,a.getOffLevel=function(){return 2147483647};var d=function(e,t){this.inner=t,this.name="JL.Exception",this.message=c(e).finalString};(a.Exception=d).prototype=new Error;var g=function(e,t,n,i,o){this.l=e,this.m=t,this.n=n,this.t=i,this.u=o};function p(e,t,n){return a.entryId++,new g(e,t,n,a._getTime(),a.entryId)}function m(e){e.id&&(clearTimeout(e.id),e.id=null)}function b(e,t,n){var i=this;e.id||(e.id=setTimeout(function(){n.call(i)},t))}a.LogItem=g;y.prototype.addLogItemsToBuffer=function(e){if(this.batchBuffer.length>=this.maxBatchSize)this.nbrLogItemsSkipped+=e.length;else{if(null!=a.maxMessages){if(a.maxMessages<1)return;a.maxMessages-=e.length}this.batchBuffer=this.batchBuffer.concat(e);var t=this;b(this.batchTimeoutTimer,this.batchTimeout,function(){t.sendBatch.call(t)})}},y.prototype.batchBufferHasOverdueMessages=function(){for(var e=0;e<this.batchBuffer.length;e++)if(a._getTime()-this.batchBuffer[e].t>this.batchTimeout)return!0;return!1},y.prototype.batchBufferHasStrandedMessage=function(){return!(null==a.maxMessages)&&a.maxMessages<1&&0<this.batchBuffer.length},y.prototype.sendBatchIfComplete=function(){(this.batchBuffer.length>=this.batchSize||this.batchBufferHasOverdueMessages()||this.batchBufferHasStrandedMessage())&&this.sendBatch()},y.prototype.onSendingEnded=function(){m(this.sendTimeoutTimer),this.nbrLogItemsBeingSent=0,this.sendBatchIfComplete()},y.prototype.setOptions=function(e){if(t("level",e,this),t("ipRegex",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("sendWithBufferLevel",e,this),t("storeInBufferLevel",e,this),t("bufferSize",e,this),t("batchSize",e,this),t("maxBatchSize",e,this),t("batchTimeout",e,this),t("sendTimeout",e,this),this.bufferSize<this.buffer.length&&(this.buffer.length=this.bufferSize),this.maxBatchSize<this.batchSize)throw new a.Exception({message:"maxBatchSize cannot be smaller than batchSize",maxBatchSize:this.maxBatchSize,batchSize:this.batchSize});return this},y.prototype.log=function(e,t,n,i,o,r,s){var a;u(this)&&f(this,r)&&(o<this.storeInBufferLevel||(a=p(o,r,s),o<this.level?0<this.bufferSize&&(this.buffer.push(a),this.buffer.length>this.bufferSize&&this.buffer.shift()):(this.addLogItemsToBuffer([a]),o>=this.sendWithBufferLevel&&this.buffer.length&&(this.addLogItemsToBuffer(this.buffer),this.buffer.length=0),this.sendBatchIfComplete())))},y.prototype.sendBatch=function(){var e;0<this.nbrLogItemsBeingSent||(m(this.batchTimeoutTimer),0!=this.batchBuffer.length&&(this.nbrLogItemsBeingSent=this.batchBuffer.length,b((e=this).sendTimeoutTimer,this.sendTimeout,function(){e.onSendingEnded.call(e)}),this.sendLogItems(this.batchBuffer,function(){e.batchBuffer.splice(0,e.nbrLogItemsBeingSent),0<e.nbrLogItemsSkipped&&(e.batchBuffer.push(p(4e3,"Lost "+e.nbrLogItemsSkipped+" messages. Either connection with the server was down or logging was disabled via the enabled option. Reduce lost messages by increasing the ajaxAppender option maxBatchSize.",e.appenderName)),e.nbrLogItemsSkipped=0),e.onSendingEnded.call(e)})))},d=y;function y(e,t){this.appenderName=e,this.sendLogItems=t,this.level=a.getTraceLevel(),this.sendWithBufferLevel=2147483647,this.storeInBufferLevel=-2147483648,this.bufferSize=0,this.batchSize=1,this.maxBatchSize=20,this.batchTimeout=2147483647,this.sendTimeout=5e3,this.buffer=[],this.batchBuffer=[],this.batchTimeoutTimer={id:null},this.sendTimeoutTimer={id:null},this.nbrLogItemsSkipped=0,this.nbrLogItemsBeingSent=0;var n="Trying to create an appender without a name or with an empty name";if(e==undefined)throw n;if(-1!=a._appenderNames.indexOf(e)){if(!e)throw n;throw"Multiple appenders use the same name "+e}a._appenderNames.push(e)}a.Appender=d;var w,v=(I(S,w=d),S.prototype.setOptions=function(e){return t("url",e,this),t("beforeSend",e,this),w.prototype.setOptions.call(this,e),this},S.prototype.sendLogItemsAjax=function(e,t){try{if(!u(this))return;this.xhr&&0!=this.xhr.readyState&&4!=this.xhr.readyState&&this.xhr.abort(),this.xhr=a._createXMLHttpRequest();var n="/jsnlog.logger";null!=a.defaultAjaxUrl&&(n=a.defaultAjaxUrl),this.url&&(n=this.url),this.xhr.open("POST",n),this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.setRequestHeader("JSNLog-RequestId",a.requestId);var i=this;this.xhr.onreadystatechange=function(){4==i.xhr.readyState&&200<=i.xhr.status&&i.xhr.status<300&&t()};var o={r:a.requestId,lg:e};"function"==typeof this.beforeSend?this.beforeSend.call(this,this.xhr,o):"function"==typeof a.defaultBeforeSend&&a.defaultBeforeSend.call(this,this.xhr,o);var r=JSON.stringify(o);this.xhr.send(r)}catch(s){}},S);function S(e){return w.call(this,e,S.prototype.sendLogItemsAjax)||this}a.AjaxAppender=v;var x,L=(I(_,x=d),_.prototype.clog=function(e){a._console.log(e)},_.prototype.cerror=function(e){a._console.error?a._console.error(e):this.clog(e)},_.prototype.cwarn=function(e){a._console.warn?a._console.warn(e):this.clog(e)},_.prototype.cinfo=function(e){a._console.info?a._console.info(e):this.clog(e)},_.prototype.cdebug=function(e){a._console.debug?a._console.debug(e):this.cinfo(e)},_.prototype.sendLogItemsConsole=function(e,t){try{if(!u(this))return;if(!a._console)return;for(var n=0;n<e.length;++n){var i=e[n],o=i.n+": "+i.m;"undefined"==typeof window&&(o=new Date(i.t)+" | "+o),i.l<=a.getDebugLevel()?this.cdebug(o):i.l<=a.getInfoLevel()?this.cinfo(o):i.l<=a.getWarnLevel()?this.cwarn(o):this.cerror(o)}}catch(r){}t()},_);function _(e){return x.call(this,e,_.prototype.sendLogItemsConsole)||this}a.ConsoleAppender=L;B.prototype.setOptions=function(e){return t("level",e,this),t("userAgentRegex",e,this),t("disallow",e,this),t("ipRegex",e,this),t("appenders",e,this),t("onceOnly",e,this),this.seenRegexes=[],this},B.prototype.buildExceptionObject=function(e){var t={};return e.stack?t.stack=e.stack:t.e=e,e.message&&(t.message=e.message),e.name&&(t.name=e.name),e.data&&(t.data=e.data),e.inner&&(t.inner=this.buildExceptionObject(e.inner)),t},B.prototype.log=function(e,t,n){var i,o,r,s=0;if(!this.appenders)return this;if(e>=this.level&&u(this)&&(n?(o=this.buildExceptionObject(n)).logData=h(t):o=t,f(this,(i=c(o)).finalString))){if(this.onceOnly)for(s=this.onceOnly.length-1;0<=s;){if(new RegExp(this.onceOnly[s]).test(i.finalString)){if(this.seenRegexes[s])return this;this.seenRegexes[s]=!0}s--}for(i.meta=i.meta||{},s=this.appenders.length-1;0<=s;)this.appenders[s].log((r=e)<=1e3?"trace":r<=2e3?"debug":r<=3e3?"info":r<=4e3?"warn":r<=5e3?"error":"fatal",i.msg,i.meta,function(){},e,i.finalString,this.loggerName),s--}return this},B.prototype.trace=function(e){return this.log(1e3,e)},B.prototype.debug=function(e){return this.log(2e3,e)},B.prototype.info=function(e){return this.log(3e3,e)},B.prototype.warn=function(e){return this.log(4e3,e)},B.prototype.error=function(e){return this.log(5e3,e)},B.prototype.fatal=function(e){return this.log(6e3,e)},B.prototype.fatalException=function(e,t){return this.log(6e3,e,t)},d=B;function B(e){this.loggerName=e,this.seenRegexes=[]}a.Logger=d,a.createAjaxAppender=function(e){return new v(e)},a.createConsoleAppender=function(e){return new L(e)},d=new("undefined"!=typeof window?v:L)(""),a.__=new a.Logger(""),a.__.setOptions({level:a.getDebugLevel(),appenders:[d]})}(s=s||{}),n.__esModule=!0,n.JL=s,"function"==typeof __jsnlog_configure&&__jsnlog_configure(s),"undefined"==typeof window||window.onerror||(window.onerror=function(e,t,n,i,o){return s("onerrorLogger").fatalException({msg:"Uncaught Exception",errorMsg:e?e.message||e:"",url:t,"line number":n,column:i},o),!1}),"undefined"==typeof window||window.onunhandledrejection||(window.onunhandledrejection=function(e){s("onerrorLogger").fatalException({msg:"unhandledrejection",errorMsg:e.reason?e.reason.message:e.message||null},e.reason)}),t(o)}();
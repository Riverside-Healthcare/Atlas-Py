"use strict";!function(){var e=function(e){for(var t,a=parseInt(e,10),r=7;r;)(t=Math.pow(10,3*r--))<=a&&(a=Math.round(1*a/t)/1+"kMGTPE"[r]);return a},t=function(t){if(t.length>0){var a=document.createElement("table");a.classList.add("table","is-no-border","is-fullwidth","bar");var r=document.createElement("tr");return r.innerHTML="<tr><th>"+t[0].title_one+'</th><th class="is-narrow">'+t[0].title_two+"</th></tr>",a.append(r),t.forEach(function(t){var r=document.createElement("tr"),s=t.href?'<a href="'+t.href+'">'+t.key+"</a>":t.key;r.innerHTML='<td class="is-middle">'+s+'</td><td class="is-narrow has-text-right"><strong class="mr-2">'+e(t.count)+"</strong>",t.percent&&(r.innerHTML+='<div class="bar-percent py-2 is-relative has-text-centered"><div class="bar-percent-fill" style="width:'+100*t.percent+'%"></div><span><strong class="has-text-grey-light">'+Math.round(100*t.percent)+"%</strong></span>"),r.innerHTML+="</td>",a.append(r)}),a}return document.createElement("span")},a=function(e){void 0===e&&(e=""),(document.querySelectorAll(".analytics[data-url]")||[]).forEach(function(t){t.setAttribute("data-parameters",e),t.dispatchEvent(new CustomEvent("reload"))})},r=function(e){void 0===e&&(e=""),(document.querySelectorAll(".bar-data-wrapper.analytics[data-url]")||[]).forEach(function(a){a.style.opacity=".5";var r=new XMLHttpRequest;r.open("get",a.dataset.url+e,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.setRequestHeader("X-CSRFToken",csrftoken),r.send(),r.addEventListener("load",function(){a.innerHTML="",a.append(t(JSON.parse(r.responseText))),a.style.visibility="visible",a.style.opacity="1"})})},s=function(t){void 0===t&&(t=""),n.style.opacity=".5";var a=document.querySelector("#analytics-views"),r=document.querySelector("#analytics-visitors"),s=document.querySelector("#analytics-load-time");a.style.opacity=".5",r.style.opacity=".5",s.style.opacity=".5",null!==o&&o.abort(),n.dataset.url.includes("?")&&(t=t.replace("?","&")),(o=new XMLHttpRequest).open("get",n.dataset.url+t,!0),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("X-CSRFToken",csrftoken),o.send(),o.addEventListener("load",function(){var t=JSON.parse(o.responseText);a&&(a.textContent=e(t.views)),r&&(r.textContent=e(t.visitors)),s&&(s.textContent=t.load_time),window.visitsChart.data=t.data,window.visitsChart.update(),n.style.opacity="1",a.style.opacity="1",r.style.opacity="1",s.style.opacity="1"})},n=document.querySelector("#visits-chart"),o=null,i={type:"bar",options:{tooltips:{position:"nearest",mode:"label"},animation:{duration:300},hover:{animationDuration:0},responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!1,legend:{display:!0,position:"bottom",userPointStyle:!0},title:{display:!1},scales:{yAxes:[{id:"1",ticks:{beginAtZero:!0,callback:function(t){return e(t)}},stacked:!1,type:"linear",position:"left"},{id:"2",ticks:{beginAtZero:!0,callback:function(e){return Math.round(10*e)/10+"s"}},stacked:!1,type:"linear",position:"right"}],xAxes:[{stacked:!0,gridLines:{display:!1}}]}}},c=document.querySelector("#visits-chart").getContext("2d"),d=function(){window.visitsChart=new Chart(c,i),s(),r();var e=require("date-fns"),t=e.addHours,n=e.addDays,o=e.addYears,d=e.startOfDay,l=e.startOfWeek,u=e.startOfMonth,p=e.startOfYear,y=e.endOfDay,h=e.endOfWeek,f=e.endOfMonth,v=e.endOfYear,m=e.differenceInSeconds;document.querySelectorAll('.dropdown.is-select[data-target="views-chart"] .dropdown-item').forEach(function(e){return e.addEventListener("click",function(e){(e.target.closest(".dropdown").querySelectorAll(".dropdown-item.is-active")||[]).forEach(function(e){e.classList.remove("is-active")}),e.target.classList.add("is-active");var i,c=e.target.closest(".dropdown.is-select .dropdown-item");c.closest(".dropdown").querySelector(".select-value").textContent=c.textContent;var g=new Date;switch(c.dataset.range){case"1":i="?start_at="+m(d(g),g)+"&end_at="+m(y(g),g);break;case"3":i="?start_at="+m(l(g,-24),g)+"&end_at="+m(h(g),g);break;case"4":i="?start_at="+m(d(n(g,-7)),g)+"&end_at=0";break;case"5":i="?start_at="+m(u(g),g)+"&end_at="+m(f(g),g);break;case"6":i="?start_at="+m(d(n(g,-30)),g)+"&end_at=0";break;case"7":i="?start_at="+m(d(n(g,-90)),g)+"&end_at=0";break;case"8":i="?start_at="+m(p(g),g)+"&end_at="+m(v(g),g);break;case"9":i="?start_at="+m(o(g,-10),g)+"&end_at=0";break;case"10":break;default:i="?start_at="+m(t(g,-24),g)+"&end_at=0"}s(i),r(i),a(i)})})};document.addEventListener("click",function(e){if((e.target.matches('.trace-resolved[type="checkbox"]')||e.target.matches('.error-resolved[type="checkbox"]'))&&"INPUT"===e.target.tagName){var t=e.target,a=1;t.hasAttribute("checked")?(t.removeAttribute("checked"),a=2,t.closest("tr.has-text-grey-light").classList.remove("has-text-grey-light"),(t.closest("tr").querySelectorAll("a.has-text-grey-light")||[]).forEach(function(e){e.classList.remove("has-text-grey-light")}),(t.closest("tr").querySelectorAll("div.notification")||[]).forEach(function(e){e.classList.add("is-danger")})):(t.setAttribute("checked","checked"),t.closest("tr").classList.add("has-text-grey-light"),(t.closest("tr").querySelectorAll("a")||[]).forEach(function(e){e.classList.add("has-text-grey-light")}),(t.closest("tr").querySelectorAll("div.notification.is-danger")||[]).forEach(function(e){e.classList.remove("is-danger")}));var r={Id:t.dataset.id,Type:a},s=Object.keys(r).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(r[e])}).join("&"),n=new XMLHttpRequest;n.open("post",t.dataset.url+"?handler=Resolved&"+s,!0),n.setRequestHeader("Content-Type","text/html;charset=UTF-8`"),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.setRequestHeader("X-CSRFToken",csrftoken),n.send()}});var l=0;!function e(){if(300===l)return!1;"undefined"==typeof Chart?setTimeout(function(){l++,e()},100):(l=0,d())}()}();
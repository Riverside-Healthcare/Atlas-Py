{% extends "layout.html.dj" %}
{% load compress %}
{% block start_css %}
    {{ block.super }}
    {% if 26 in permissions or 28 in permissions %}
        <link rel="stylesheet" href="{% static '/lib/codemirror/mycss.css' %}" type="text/css" />
        <link rel="stylesheet" href="{% static '/css/live-editor.scss' %}" type="text/x-scss" />
    {% endif %}
{% endblock start_css %}
{% block modals %}
    {{ block.super }}
    {% if 26 in permissions %}
        {% include "project_new.html.dj" %}
    {% endif %}
    {% if 28 in permissions %}
        {% include "project_edit.html.dj" %}
    {% endif %}
{% endblock modals %}
{% block side_links %}
    {% if 28 in permissions %}
        <!-- editor -->
        <a class="nav-link" data-toggle="mdl" data-target="editModal" data-tooltip="Open Atlas Editor">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512">
            <path d="M402.3 344.9l32-32c5-5 13.7-1.5 13.7 5.7V464c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h273.5c7.1 0 10.7 8.6 5.7 13.7l-32 32c-1.5 1.5-3.5 2.3-5.7 2.3H48v352h352V350.5c0-2.1.8-4.1 2.3-5.6zm156.6-201.8L296.3 405.7l-90.4 10c-26.2 2.9-48.5-19.2-45.6-45.6l10-90.4L432.9 17.1c22.9-22.9 59.9-22.9 82.7 0l43.2 43.2c22.9 22.9 22.9 60 .1 82.8zM460.1 174L402 115.9 216.2 301.8l-7.3 65.3 65.3-7.3L460.1 174zm64.8-79.7l-43.2-43.2c-4.1-4.1-10.8-4.1-14.8 0L436 82l58.1 58.1 30.9-30.9c4-4.2 4-10.8-.1-14.9z"/></svg>
        </a>
    {% endif %}
    {% if 27 in permissions %}
        <!-- delete -->
        <a class="nav-link"
           data-tooltip="Delete this Project"
           href="/projects/{{ project.project_id }}/delete"
           onclick="return confirm('Are you sure you want to remove this?');">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"/>
        </svg>
    </a>
{% endif %}
<a class="nav-link {{ favorite }}"
   data-tooltip=" {% if favorite %} Remove from Favorites {% else %} Add to Favorites {% endif %} "
   fav-type="project"
   object-id="@Model.DataProject.Id">
<svg viewBox="0 0 576 512" xmlns="http://www.w3.org/2000/svg" ><path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"/></svg>
</a>
<a class="nav-link"
   data-tooltip="Share"
   data-toggle="mdl"
   data-target="shareModal"
   data-name="{{ project }}"
   data-type="project">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M503.691 189.836L327.687 37.851C312.281 24.546 288 35.347 288 56.015v80.053C127.371 137.907 0 170.1 0 322.326c0 61.441 39.581 122.309 83.333 154.132 13.653 9.931 33.111-2.533 28.077-18.631C66.066 312.814 132.917 274.316 288 272.085V360c0 20.7 24.3 31.453 39.687 18.164l176.004-152c11.071-9.562 11.086-26.753 0-36.328z"/>
</svg>
</a>
<a class="nav-link"
   data-tooltip="Share Feedback"
   data-toggle="mdl"
   data-target="shareFeedback"
   data-name="{{ project }}">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
<path d="M466.27 286.69C475.04 271.84 480 256 480 236.85c0-44.015-37.218-85.58-85.82-85.58H357.7c4.92-12.81 8.85-28.13 8.85-46.54C366.55 31.936 328.86 0 271.28 0c-61.607 0-58.093 94.933-71.76 108.6-22.747 22.747-49.615 66.447-68.76 83.4H32c-17.673 0-32 14.327-32 32v240c0 17.673 14.327 32 32 32h64c14.893 0 27.408-10.174 30.978-23.95 44.509 1.001 75.06 39.94 177.802 39.94 7.22 0 15.22.01 22.22.01 77.117 0 111.986-39.423 112.94-95.33 13.319-18.425 20.299-43.122 17.34-66.99 9.854-18.452 13.664-40.343 8.99-62.99zm-61.75 53.83c12.56 21.13 1.26 49.41-13.94 57.57 7.7 48.78-17.608 65.9-53.12 65.9h-37.82c-71.639 0-118.029-37.82-171.64-37.82V240h10.92c28.36 0 67.98-70.89 94.54-97.46 28.36-28.36 18.91-75.63 37.82-94.54 47.27 0 47.27 32.98 47.27 56.73 0 39.17-28.36 56.72-28.36 94.54h103.99c21.11 0 37.73 18.91 37.82 37.82.09 18.9-12.82 37.81-22.27 37.81 13.489 14.555 16.371 45.236-5.21 65.62zM88 432c0 13.255-10.745 24-24 24s-24-10.745-24-24 10.745-24 24-24 24 10.745 24 24z"/></svg>
</a>
{% if 26 in permissions %}
<a class="nav-link" data-toggle="mdl" data-target="newModal" data-tooltip="Create New Project">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"/>
</svg>
</a>
{% endif %}
{% endblock side_links %}
{% block body %}
<div class="pageTitle">
<h2 class="pageTitle-head">
<span>{{ project }}</span>
</h2>
<div class="pageNav">
<a href="#about" class="pageNav-link">
Details
</a>
{% if project.report_annotations.all or project.term_annotationss.all %}
<a href="#links" class="pageNav-link">
    Linked Content
</a>
{% endif %}
{% if project.attachments.all %}
<a href="#attachments" class="pageNav-link">
    Attachments
</a>
{% endif %}
{% if project.agreements.all %}
<a href="#agreements" class="pageNav-link">
    Agreements
</a>
{% endif %}
{% if project.tasks.all %}
<a href="#tasks" class="pageNav-link">
    Milestones
</a>
{% endif %}
<a href="#comments" class="pageNav-link">
Comments
</a>
</div>
</div>
<section class="pageSection">
<span class="location" id="about"></span>
{% include "project_details.html.dj" %}
</section>
<section class="pageSection">
<span class="location" id="links"></span>
{% if project.report_annotations.all or project.term_annotationss.all %}
{% include "project_links.html.dj" %}
{% endif %}
</section>
<section class="pageSection">
<span class="location" id="attachments"></span>
{% if project.attachments.all %}
{% include "project_attachments.html.dj" %}
{% endif %}
</section>
<section class="pageSection">
<span class="location" id="agreements"></span>
{% if project.agreements.all %}
{% include "project_agreements.html.dj" %}
{% endif %}
</section>
<section class="pageSection">
<span class="location" id="tasks"></span>
{% if project.tasks.all %}
{% include "project_tasks.html.dj" %}
{% endif %}
</section>
<section class="pageSection" >
<span class="location" id="comments"></span>
<div class="comments" data-ajax="yes" data-url="/projects/{{ project.project_id }}/comments"></div>
</section>
{% endblock body %}
{% block js %}
{% compress js file flowchart %}
<script src="{% static '/lib/flowchart/raphael.min.js' %}"></script>
<script src="{% static '/lib/flowchart/flowchart.min.js' %}"></script>
<script src="{% static '/lib/flowchart/custom.js' %}"></script>
{% endcompress %}
{% if 26 in permissions or 28 in permissions %}
{% compress js file project_editor %}
<script src="{% static '/js/milestone-checklist.js' %}"></script>
<script src="{% static '/js/projectEditor.js' %}"></script>
{% endcompress %}
{% endif %}
<script>hljs.highlightAll();
</script>
{% if 26 in permissions or 28 in permissions %}
{% compress js file editor %}
<script src="{% static '/lib/codemirror/codemirror.js' %}" ></script>
<script src="{% static '/lib/codemirror/autorefresh.js' %}" ></script>
<script src="{% static '/lib/codemirror/overlay.js' %}" ></script>
<script src="{% static '/lib/codemirror/markdown.js' %}" ></script>
<script src="{% static '/lib/codemirror/gfm.js' %}" ></script>
<script src="{% static '/lib/codemirror/python.js' %}" ></script>
<script src="{% static '/lib/codemirror/r.js' %}" ></script>
<script src="{% static '/lib/codemirror/shell.js' %}" ></script>
<script src="{% static '/lib/codemirror/sql.js' %}" ></script>
<script src="{% static '/js/editor.js' %}" ></script>
<script src="{% static '/js/utility/checkbox.js' %}" ></script>
{% endcompress %}
{% endif %}
{% endblock js %}
